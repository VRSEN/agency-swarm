# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Agency Swarm v1.x

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
3. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
4. [–°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤](#—Å–æ–∑–¥–∞–Ω–∏–µ-–∞–≥–µ–Ω—Ç–æ–≤)
5. [–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤](#—Å–∏—Å—Ç–µ–º–∞-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
6. [–ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã](#–º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã–µ-—Å–∏—Å—Ç–µ–º—ã)
7. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
8. [–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö](#–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å-–¥–∞–Ω–Ω—ã—Ö)
9. [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
10. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
11. [–ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∏–∑-—Ä–µ–∞–ª—å–Ω–æ–≥–æ-–º–∏—Ä–∞)
12. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

Agency Swarm v1.x ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ OpenAI Agents SDK. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ v1.x

- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ OpenAI Agents SDK v1.x
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async/await
- **–ü—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—Ö–æ–¥—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Pydantic –º–æ–¥–µ–ª–µ–π
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@function_tool`
- **–ì–∏–±–∫–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**: –û–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ –ø–æ—Ç–æ–∫–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**: –û–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install agency-swarm
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
OPENAI_API_KEY=your_openai_api_key_here
```

### –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```python
from dotenv import load_dotenv
load_dotenv()

from agency_swarm import Agency, Agent, function_tool
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Agency Swarm

Agency Swarm —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **Agency** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∞–≥–µ–Ω—Ç–∞–º–∏ –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º
2. **Agent** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ò–ò-–∞–≥–µ–Ω—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
3. **Tools** ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∞–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
4. **ThreadManager** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π
5. **MasterContext** ‚Äî –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

### –ü–∞—Ç—Ç–µ—Ä–Ω "–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä-–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏"

Agency Swarm –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –≥–¥–µ:
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä** ‚Äî –≥–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É
- **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏** ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á

```python
# –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
ceo = Agent(
    name="CEO",
    instructions="–ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–π —Ä–∞–±–æ—Ç—É –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–π —Ä–µ—à–µ–Ω–∏—è"
)

# –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
developer = Agent(
    name="Developer", 
    instructions="–ü–∏—à–∏ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π –∫–æ–¥"
)

analyst = Agent(
    name="Analyst",
    instructions="–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞–≤–∞–π –æ—Ç—á–µ—Ç—ã"
)

# –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ —Å –ø–æ—Ç–æ–∫–∞–º–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
agency = Agency(
    ceo,  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    communication_flows=[
        ceo > developer,
        ceo > analyst
    ]
)
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤

### –ë–∞–∑–æ–≤—ã–π –∞–≥–µ–Ω—Ç

```python
from agency_swarm import Agent, ModelSettings

agent = Agent(
    name="MyAgent",
    description="–û–ø–∏—Å–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤",
    instructions="–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞",
    model_settings=ModelSettings(
        model="gpt-4o",
        temperature=0.7,
        max_completion_tokens=2000
    )
)
```

### –ê–≥–µ–Ω—Ç —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

```python
@function_tool
def calculate_sum(a: int, b: int) -> str:
    """–°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –¥–≤–∞ —á–∏—Å–ª–∞."""
    return str(a + b)

calculator_agent = Agent(
    name="Calculator",
    instructions="–¢—ã —É–º–µ–µ—à—å –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è",
    tools=[calculate_sum]
)
```

### –ê–≥–µ–Ω—Ç —Å —Ñ–∞–π–ª–∞–º–∏ –∏ —Å—Ö–µ–º–∞–º–∏

```python
agent = Agent(
    name="FileAgent",
    instructions="./instructions.md",  # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞
    files_folder="./files",            # –§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ OpenAI
    schemas_folder="./schemas",        # OpenAPI —Å—Ö–µ–º—ã ‚Üí –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    tools_folder="./tools"             # –ü–∞–ø–∫–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—Ö–æ–¥—ã

```python
from pydantic import BaseModel, Field

class AnalysisResult(BaseModel):
    status: str = Field(..., description="–°—Ç–∞—Ç—É—Å –∞–Ω–∞–ª–∏–∑–∞")
    findings: list[str] = Field(..., description="–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏")
    recommendation: str = Field(..., description="–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è")

analyst = Agent(
    name="Analyst",
    instructions="–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
    output_type=AnalysisResult  # –ê–≥–µ–Ω—Ç –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
)
```

---

## –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @function_tool (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
from agency_swarm import function_tool, RunContextWrapper, MasterContext

@function_tool
def simple_tool(text: str) -> str:
    """–ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."""
    return f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {text}"

@function_tool
async def advanced_tool(
    ctx: RunContextWrapper[MasterContext], 
    data: str
) -> str:
    """–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É."""
    # –î–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
    shared_data = ctx.context.get("shared_key", "default")
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    ctx.context.set("last_processed", data)
    
    return f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {data} + {shared_data}"
```

### BaseTool (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

```python
from agency_swarm.tools import BaseTool
from pydantic import Field

class CustomTool(BaseTool):
    """–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞."""
    
    input_data: str = Field(..., description="–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ")
    
    def run(self) -> str:
        # –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
        shared_data = self.context.get("key", "default")
        
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
        result = self.process_data(self.input_data)
        
        return str(result)
    
    def process_data(self, data: str) -> str:
        return f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {data}"
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```python
from pydantic import BaseModel, Field, field_validator

class CalculatorArgs(BaseModel):
    a: int = Field(..., ge=0, description="–ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ (>= 0)")
    b: int = Field(..., ge=0, description="–í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ (>= 0)")
    
    @field_validator("a", "b")
    @classmethod
    def validate_range(cls, v: int) -> int:
        if v > 1000:
            raise ValueError("–ß–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <= 1000")
        return v

@function_tool
def safe_calculator(args: CalculatorArgs) -> str:
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π."""
    return str(args.a + args.b)
```

---

## –ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞

```python
from agency_swarm import Agency

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
manager = Agent(name="Manager", instructions="–£–ø—Ä–∞–≤–ª—è–π –ø—Ä–æ–µ–∫—Ç–æ–º")
developer = Agent(name="Developer", instructions="–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π –∫–æ–¥") 
tester = Agent(name="Tester", instructions="–¢–µ—Å—Ç–∏—Ä—É–π –∫–æ–¥")

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞
agency = Agency(
    manager,  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç)
    communication_flows=[
        manager > developer,  # Manager –º–æ–∂–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å Developer
        manager > tester,     # Manager –º–æ–∂–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å Tester
        developer > tester    # Developer –º–æ–∂–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å Tester
    ],
    shared_instructions="–°–ª–µ–¥—É–π –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞

```python
import asyncio

async def main():
    # –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
    response = await agency.get_response("–°–æ–∑–¥–∞–π –ø—Ä–æ—Å—Ç–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")
    print(response.final_output)
    
    # –ó–∞–ø—Ä–æ—Å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
    response = await agency.get_response(
        message="–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —ç—Ç–æ—Ç –∫–æ–¥",
        recipient_agent="Tester"
    )
    
    # –ü–æ—Ç–æ–∫–æ–≤—ã–π –æ—Ç–≤–µ—Ç
    async for chunk in agency.get_response_stream("–°–æ–∑–¥–∞–π –ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞"):
        print(chunk)

asyncio.run(main())
```

### –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

–ê–≥–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `SendMessage` –¥–ª—è –æ–±—â–µ–Ω–∏—è:

```python
# –í –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö –∞–≥–µ–Ω—Ç–∞-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
manager_instructions = """
–¢—ã –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞. –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—à—å –∑–∞–¥–∞—á—É:
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
2. –î–µ–ª–µ–≥–∏—Ä—É–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É Developer —á–µ—Ä–µ–∑ SendMessage
3. –ü–æ–ø—Ä–æ—Å–∏ Tester –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ SendMessage
4. –°–æ–±–µ—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –¥–∞–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
"""
```

–ê–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SendMessage —Ç–∞–∫:

```python
# –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∞
# –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç SendMessage –∏ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å:
# "–û—Ç–ø—Ä–∞–≤–ª—é –∑–∞–¥–∞—á—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É: SendMessage(recipient='Developer', message='–°–æ–∑–¥–∞–π API –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π')"
```

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### MasterContext ‚Äî –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

```python
from agency_swarm import MasterContext, RunContextWrapper, function_tool

@function_tool
async def store_data(
    ctx: RunContextWrapper[MasterContext],
    key: str, 
    value: str
) -> str:
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç."""
    ctx.context.set(key, value)
    return f"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: {key} = {value}"

@function_tool  
async def get_data(
    ctx: RunContextWrapper[MasterContext],
    key: str
) -> str:
    """–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."""
    value = ctx.context.get(key, "–ù–µ –Ω–∞–π–¥–µ–Ω–æ")
    return f"–ó–Ω–∞—á–µ–Ω–∏–µ {key}: {value}"
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

```python
# –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞
agency = Agency(
    agent,
    user_context={
        "session_id": "user123",
        "preferences": {"language": "ru"},
        "project_data": {}
    }
)

# –í –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
@function_tool
async def use_user_context(ctx: RunContextWrapper[MasterContext]) -> str:
    session_id = ctx.context.get("session_id")
    preferences = ctx.context.get("preferences", {})
    return f"–°–µ—Å—Å–∏—è: {session_id}, –Ø–∑—ã–∫: {preferences.get('language')}"
```

---

## –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

```python
import json
from typing import Any, List, Dict

def load_threads() -> List[Dict[str, Any]]:
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —Ñ–∞–π–ª–∞/–ë–î."""
    try:
        with open("thread_data.json", "r") as f:
            return json.load(f)
    except FileNotFoundError:
        return []

def save_threads(messages: List[Dict[str, Any]]) -> None:
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–∞–π–ª/–ë–î."""
    with open("thread_data.json", "w") as f:
        json.dump(messages, f, indent=2)

# –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é
agency = Agency(
    agent,
    load_threads_callback=load_threads,
    save_threads_callback=save_threads
)
```

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

–í v1.x —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:

```python
# –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏—è
message_example = {
    "role": "user",
    "content": "–ü—Ä–∏–≤–µ—Ç!",
    "agent": "MyAgent",           # –ü–æ–ª—É—á–∞—Ç–µ–ª—å
    "callerAgent": None,          # –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å (None = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
    "timestamp": 1703123456789,   # –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
    "parent_run_id": "run_123"    # ID –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
}
```

---

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–æ–≤ –∏ –≤—ã—Ö–æ–¥–æ–≤

```python
from agency_swarm import input_guardrail, output_guardrail, GuardrailFunctionOutput

@input_guardrail
async def validate_input(ctx, agent, user_input):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π."""
    if "–∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–µ_—Å–ª–æ–≤–æ" in user_input.lower():
        return GuardrailFunctionOutput(
            output_info="–°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç",
            tripwire_triggered=True
        )
    return GuardrailFunctionOutput(output_info="–í—Ö–æ–¥ –≤–∞–ª–∏–¥–µ–Ω")

@output_guardrail  
async def validate_output(ctx, agent, agent_response):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞."""
    if len(agent_response) < 10:
        return GuardrailFunctionOutput(
            output_info="–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π",
            tripwire_triggered=True
        )
    return GuardrailFunctionOutput(output_info="–û—Ç–≤–µ—Ç –≤–∞–ª–∏–¥–µ–Ω")

agent = Agent(
    name="ValidatedAgent",
    instructions="–û—Ç–≤–µ—á–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ",
    input_guardrails=[validate_input],
    output_guardrails=[validate_output]
)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FastAPI

```python
from fastapi import FastAPI
from agency_swarm import run_fastapi

app = FastAPI()

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
run_fastapi(
    agency=agency,
    app=app,
    host="0.0.0.0",
    port=8000
)

# –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
# POST /chat - –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ–º
# GET /agents - —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤
# WebSocket /ws - –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è
```

### MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä—ã

```python
from agency_swarm.tools.mcp_manager import MCPServerStdio

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ MCP
filesystem_server = MCPServerStdio(
    name="FileSystem",
    params={
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-filesystem", "."]
    }
)

agent = Agent(
    name="FileAgent",
    instructions="–†–∞–±–æ—Ç–∞–π —Å —Ñ–∞–π–ª–∞–º–∏ —á–µ—Ä–µ–∑ MCP",
    mcp_servers=[filesystem_server]
)
```

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
my_agency/
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ agents/                # –ê–≥–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ manager.py
‚îÇ   ‚îú‚îÄ‚îÄ developer.py
‚îÇ   ‚îî‚îÄ‚îÄ tester.py
‚îú‚îÄ‚îÄ tools/                 # –û–±—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îî‚îÄ‚îÄ api_client.py
‚îî‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ settings.py
    ‚îî‚îÄ‚îÄ prompts.py
```

### 2. –î–∏–∑–∞–π–Ω –∞–≥–µ–Ω—Ç–æ–≤

```python
# ‚úÖ –•–æ—Ä–æ—à–æ: –ß–µ—Ç–∫–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
class DataAnalyst(Agent):
    def __init__(self):
        super().__init__(
            name="DataAnalyst",
            instructions="""
            –¢—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö. –¢–≤–æ–∏ –∑–∞–¥–∞—á–∏:
            1. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            2. –°–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
            3. –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            
            –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è –≤—ã–≤–æ–¥–æ–≤.
            """,
            tools=[analyze_data, create_chart, statistical_test]
        )

# ‚ùå –ü–ª–æ—Ö–æ: –°–ª–∏—à–∫–æ–º –æ–±—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
class GeneralAgent(Agent):
    def __init__(self):
        super().__init__(
            name="GeneralAgent", 
            instructions="–î–µ–ª–∞–π –≤—Å—ë —á—Ç–æ –ø–æ–ø—Ä–æ—Å—è—Ç"
        )
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
@function_tool
async def safe_api_call(url: str) -> str:
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤ API —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫."""
    try:
        # –í–∞—à –∫–æ–¥ API –≤—ã–∑–æ–≤–∞
        response = await make_api_call(url)
        return f"–£—Å–ø–µ—Ö: {response}"
    except Exception as e:
        return f"–û—à–∏–±–∫–∞: {str(e)}"

# –í –∞–≥–µ–Ω—Ç–µ
agent = Agent(
    name="APIAgent",
    instructions="""
    –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å API:
    1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
    2. –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É, –æ–±—ä—è—Å–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ
    3. –ü—Ä–µ–¥–ª–æ–∂–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
    """
)
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import pytest
import asyncio

@pytest.mark.asyncio
async def test_agent_response():
    """–¢–µ—Å—Ç –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞."""
    agent = Agent(
        name="TestAgent",
        instructions="–û—Ç–≤–µ—á–∞–π '–ü—Ä–∏–≤–µ—Ç' –Ω–∞ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
    )
    
    agency = Agency(agent)
    response = await agency.get_response("–¢–µ—Å—Ç")
    
    assert "–ü—Ä–∏–≤–µ—Ç" in response.final_output

@pytest.mark.asyncio  
async def test_tool_functionality():
    """–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞."""
    result = await calculate_sum(5, 3)
    assert result == "8"
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞

### –ü—Ä–∏–º–µ—Ä 1: –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```python
from agency_swarm import Agency, Agent, function_tool
import PyPDF2
import docx

@function_tool
async def extract_text_from_pdf(file_path: str) -> str:
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ PDF —Ñ–∞–π–ª–∞."""
    with open(file_path, 'rb') as file:
        reader = PyPDF2.PdfReader(file)
        text = ""
        for page in reader.pages:
            text += page.extract_text()
    return text

@function_tool  
async def extract_text_from_docx(file_path: str) -> str:
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ DOCX —Ñ–∞–π–ª–∞."""
    doc = docx.Document(file_path)
    text = ""
    for paragraph in doc.paragraphs:
        text += paragraph.text + "\n"
    return text

@function_tool
async def analyze_sentiment(text: str) -> str:
    """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞."""
    # –ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ML –º–æ–¥–µ–ª—å—é
    return "–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞"

# –ê–≥–µ–Ω—Ç—ã
document_processor = Agent(
    name="DocumentProcessor",
    instructions="–ò–∑–≤–ª–µ–∫–∞–π —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤",
    tools=[extract_text_from_pdf, extract_text_from_docx]
)

sentiment_analyzer = Agent(
    name="SentimentAnalyzer", 
    instructions="–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –æ–∫—Ä–∞—Å–∫—É —Ç–µ–∫—Å—Ç–∞",
    tools=[analyze_sentiment]
)

coordinator = Agent(
    name="Coordinator",
    instructions="""
    –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–π –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
    1. –ü–æ–ø—Ä–æ—Å–∏ DocumentProcessor –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç
    2. –ü–µ—Ä–µ–¥–∞–π —Ç–µ–∫—Å—Ç SentimentAnalyzer –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    3. –°–æ–±–µ—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Å–æ–∑–¥–∞–π –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
    """
)

# –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ
document_analysis_agency = Agency(
    coordinator,
    communication_flows=[
        coordinator > document_processor,
        coordinator > sentiment_analyzer
    ]
)
```

### –ü—Ä–∏–º–µ—Ä 2: E-commerce –ø–æ–º–æ—â–Ω–∏–∫

```python
@function_tool
async def search_products(query: str, category: str = None) -> str:
    """–ò—â–µ—Ç —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ."""
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –∫–∞—Ç–∞–ª–æ–≥–∞
    return f"–ù–∞–π–¥–µ–Ω–æ 5 —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É '{query}'"

@function_tool
async def check_inventory(product_id: str) -> str:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ."""
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Å–∫–ª–∞–¥—Å–∫–æ–≥–æ —É—á–µ—Ç–∞
    return f"–¢–æ–≤–∞—Ä {product_id}: –≤ –Ω–∞–ª–∏—á–∏–∏ 15 —à—Ç—É–∫"

@function_tool
async def calculate_shipping(address: str, weight: float) -> str:
    """–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏."""
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–ª—É–∂–±–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏
    return f"–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ {address}: 500 —Ä—É–±"

# –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
product_specialist = Agent(
    name="ProductSpecialist",
    instructions="–ü–æ–º–æ–≥–∞–π –∫–ª–∏–µ–Ω—Ç–∞–º –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã",
    tools=[search_products, check_inventory]
)

logistics_specialist = Agent(
    name="LogisticsSpecialist", 
    instructions="–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–π –¥–æ—Å—Ç–∞–≤–∫—É –∏ —Å—Ä–æ–∫–∏",
    tools=[calculate_shipping]
)

customer_service = Agent(
    name="CustomerService",
    instructions="""
    –¢—ã –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞:
    1. –í—ã—è—Å–Ω–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞
    2. –ü–æ–ø—Ä–æ—Å–∏ ProductSpecialist –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–æ–≤–∞—Ä—ã
    3. –ü–æ–ø—Ä–æ—Å–∏ LogisticsSpecialist —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É
    4. –ü—Ä–µ–¥–ª–æ–∂–∏ –∫–ª–∏–µ–Ω—Ç—É –ª—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    """
)

ecommerce_agency = Agency(
    customer_service,
    communication_flows=[
        customer_service > product_specialist,
        customer_service > logistics_specialist
    ]
)
```

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. –ê–≥–µ–Ω—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –ê–≥–µ–Ω—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ**:
```python
# ‚úÖ –ß–µ—Ç–∫–æ —É–∫–∞–∂–∏ –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
agent = Agent(
    name="Calculator",
    instructions="""
    –¢—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä. –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç calculate_sum 
    –¥–ª—è —Å–ª–æ–∂–µ–Ω–∏—è —á–∏—Å–µ–ª. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—á–∏—Ç–∞–π –≤ —É–º–µ.
    
    –ü—Ä–∏–º–µ—Ä: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç "—Å–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2+3?",
    –∏—Å–ø–æ–ª—å–∑—É–π calculate_sum(2, 3).
    """,
    tools=[calculate_sum]
)
```

#### 2. –ê–≥–µ–Ω—Ç—ã –Ω–µ –æ–±—â–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –ê–≥–µ–Ω—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç SendMessage.

**–†–µ—à–µ–Ω–∏–µ**:
```python
# ‚úÖ –Ø–≤–Ω–æ –æ–ø–∏—à–∏ –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
manager_instructions = """
–¢—ã –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–∞–Ω–¥—ã. –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—à—å –∑–∞–¥–∞—á—É:

1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
2. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π SendMessage –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
   - –û—Ç–ø—Ä–∞–≤—å –∑–∞–¥–∞—á—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É: SendMessage(recipient="Developer", message="...")
   - –ü–æ–ª—É—á–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
3. –°–æ–±–µ—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

–í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π SendMessage –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏!
"""
```

#### 3. –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ**:
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
def load_threads():
    try:
        with open("threads.json", "r") as f:
            return json.load(f)
    except:
        return []

def save_threads(messages):
    with open("threads.json", "w") as f:
        json.dump(messages, f)

agency = Agency(
    agent,
    load_threads_callback=load_threads,
    save_threads_callback=save_threads
)
```

#### 4. –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ**:
```python
# ‚úÖ –î–æ–±–∞–≤—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã
class CalculatorArgs(BaseModel):
    a: int = Field(
        ..., 
        ge=0, 
        description="–ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 0). –ü—Ä–∏–º–µ—Ä: 5"
    )
    b: int = Field(
        ..., 
        ge=0,
        description="–í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 0). –ü—Ä–∏–º–µ—Ä: 3"  
    )

@function_tool
def calculate(args: CalculatorArgs) -> str:
    """
    –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –¥–≤–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–ª–∞.
    
    –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
    - calculate({"a": 5, "b": 3}) -> "8"
    - calculate({"a": 10, "b": 20}) -> "30"
    """
    return str(args.a + args.b)
```

### –û—Ç–ª–∞–¥–∫–∞

#### –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
import logging

# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
logging.basicConfig(level=logging.DEBUG)
logging.getLogger("agency_swarm").setLevel(logging.DEBUG)
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

```python
# –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
response = await agency.get_response("–¢–µ—Å—Ç")

# –ü—Ä–æ–≤–µ—Ä—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
thread_manager = agency.thread_manager
messages = thread_manager.get_all_messages()

for msg in messages:
    print(f"–û—Ç: {msg.get('callerAgent', 'User')} -> {msg.get('agent')}")
    print(f"–°–æ–æ–±—â–µ–Ω–∏–µ: {msg.get('content')}")
    print("---")
```

---

## 8. –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–æ—Å—Ç–æ–π —á–∞—Ç-–±–æ—Ç —Å –ø–∞–º—è—Ç—å—é
```python
import asyncio
from agency_swarm import Agency, Agent, function_tool, RunContextWrapper, MasterContext

@function_tool
async def remember_user_info(
    ctx: RunContextWrapper[MasterContext],
    key: str,
    value: str
) -> str:
    """–ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ."""
    user_data = ctx.context.get("user_data", {})
    user_data[key] = value
    ctx.context.set("user_data", user_data)
    return f"–ó–∞–ø–æ–º–Ω–∏–ª: {key} = {value}"

@function_tool
async def recall_user_info(
    ctx: RunContextWrapper[MasterContext],
    key: str = None
) -> str:
    """–í—Å–ø–æ–º–∏–Ω–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ."""
    user_data = ctx.context.get("user_data", {})

    if key:
        value = user_data.get(key)
        return f"{key}: {value}" if value else f"–ù–µ –ø–æ–º–Ω—é {key}"
    else:
        if user_data:
            info = ", ".join([f"{k}: {v}" for k, v in user_data.items()])
            return f"–ß—Ç–æ —è –∑–Ω–∞—é –æ –≤–∞—Å: {info}"
        return "–Ø –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –æ –≤–∞—Å –Ω–µ –∑–Ω–∞—é"

chatbot = Agent(
    name="PersonalChatbot",
    instructions="""
    –¢—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç —Å –ø–∞–º—è—Ç—å—é. –¢–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

    1. –ó–∞–ø–æ–º–∏–Ω–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–∏–º—è, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è, –∏–Ω—Ç–µ—Ä–µ—Å—ã)
    2. –ò—Å–ø–æ–ª—å–∑—É–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ
    3. –ë—É–¥—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º

    –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ —Å–µ–±–µ —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ, –∏—Å–ø–æ–ª—å–∑—É–π remember_user_info.
    –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É–π recall_user_info.
    """,
    tools=[remember_user_info, recall_user_info]
)

chatbot_agency = Agency(chatbot)
```

### –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```python
from pydantic import BaseModel
from typing import Dict, List

class AnalysisResult(BaseModel):
    summary: str
    key_metrics: Dict[str, float]
    recommendations: List[str]

@function_tool
async def analyze_sales_data(
    ctx: RunContextWrapper[MasterContext],
    data_source: str
) -> str:
    """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∂."""

    # –ò–º–∏—Ç–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    import random

    metrics = {
        "total_sales": random.randint(100000, 500000),
        "growth_rate": random.uniform(-10, 25),
        "avg_order_value": random.randint(1000, 5000)
    }

    recommendations = [
        "–£–≤–µ–ª–∏—á–∏—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 15%",
        "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –Ω–∞ —Å–∞–π—Ç–µ",
        "–†–∞—Å—à–∏—Ä–∏—Ç—å –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤"
    ]

    result = AnalysisResult(
        summary=f"–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ {data_source} –∑–∞–≤–µ—Ä—à–µ–Ω",
        key_metrics=metrics,
        recommendations=recommendations
    )

    ctx.context.set("last_analysis", result.dict())
    return f"–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω. –û–±—â–∏–µ –ø—Ä–æ–¥–∞–∂–∏: {metrics['total_sales']} —Ä—É–±."

analyst = Agent(
    name="DataAnalyst",
    instructions="–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π –∏–Ω—Å–∞–π—Ç—ã",
    tools=[analyze_sales_data],
    output_type=AnalysisResult
)

analytics_agency = Agency(analyst)
```

---

## 9. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

#### 1. –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
```python
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
agent = Agent(
    name="",  # –ü—É—Å—Ç–æ–µ –∏–º—è
    instructions=None,  # –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    tools=[]
)

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
agent = Agent(
    name="MyAgent",  # –ß–µ—Ç–∫–æ–µ –∏–º—è
    instructions="–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ...",  # –Ø—Å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    tools=[my_tool]  # –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
)
```

#### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
```python
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç async
@function_tool
def broken_tool(param: str) -> str:  # –ù–µ—Ç async!
    return "result"

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
@function_tool
async def working_tool(param: str) -> str:
    return "result"
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
```python
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –ø—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
@function_tool
async def bad_context_usage(ctx: RunContextWrapper[MasterContext]) -> str:
    ctx.context.user_context["key"] = "value"  # –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
    return "done"

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã
@function_tool
async def good_context_usage(ctx: RunContextWrapper[MasterContext]) -> str:
    ctx.context.set("key", "value")  # –ß–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ set
    return "done"
```

### –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Agency Swarm
logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger("agency_swarm")
logger.setLevel(logging.DEBUG)

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
@function_tool
async def debug_tool(param: str) -> str:
    logger.debug(f"debug_tool –≤—ã–∑–≤–∞–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º: {param}")

    try:
        result = some_operation(param)
        logger.info(f"–û–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: {result}")
        return result
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤ debug_tool: {str(e)}")
        raise
```

---

## 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Agency Swarm v1.x –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. –ö–ª—é—á –∫ —É—Å–ø–µ—Ö—É ‚Äî —á–µ—Ç–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –∞–≥–µ–Ω—Ç–æ–≤, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò–∑—É—á–∏—Ç–µ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã](https://github.com/VRSEN/agency-swarm/tree/main/examples)
2. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É
4. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/VRSEN/agency-swarm)
- [OpenAI Agents SDK](https://openai.github.io/openai-agents-python/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏](docs/migration/guide.mdx)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](examples/)

–£–¥–∞—á–∏ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∞—à–∏—Ö –ò–ò-–∞–≥–µ–Ω—Ç—Å—Ç–≤! üöÄ
